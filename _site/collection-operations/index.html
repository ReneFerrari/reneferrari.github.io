<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>[WIP] Collection Operations üîß &#8211; Rene Ferrari</title> <meta name="description" content="A basic overview of collection operations existing in the kotlin stdlib."> <meta name="keywords" content=""> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="avatar.jpg"> <meta name="twitter:title" content="[WIP] Collection Operations üîß"> <meta name="twitter:description" content="A basic overview of collection operations existing in the kotlin stdlib."> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="[WIP] Collection Operations üîß"> <meta property="og:description" content="A basic overview of collection operations existing in the kotlin stdlib."> <meta property="og:url" content="http://localhost:4000/collection-operations/"> <meta property="og:site_name" content="Rene Ferrari"> <meta property="og:image" content="http://localhost:4000/images/avatar.jpg"> <link rel="canonical" href="http://localhost:4000/collection-operations/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Rene Ferrari" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/unsplash-gallery-image-3.jpg) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/unsplash-image-10.jpg) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(28, 28, 28, 0.75), rgba(48, 48, 48, 0.75)), url(http://localhost:4000/images/home.jpg) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page" style="background: #ececec52;"> <div style="overflow-y:auto; height: 100%;"> <a href="http://localhost:4000"> <h3 style="margin-left: 56px;">Home</h3> </a> <div class="inner-post content-post" style="padding-top: 0px;"> <h1 style="text-align: center;">[WIP] Collection Operations üîß </h1> <div class="date-highlight">11 Aug 2019</div> <h2 id="transforming">Transforming</h2> <h3 id="map">Map</h3> <p>The <code class="highlighter-rouge">map</code> operation is definitely one of the most used and well known ones. It simply applies a transformation to each element of a collection. A very basic example would be:</p> <figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="kd">data class</span> <span class="nc">Person</span><span class="p">(</span><span class="kd">val</span> <span class="py">firstName</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">lastName</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">people</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s">"John"</span><span class="p">,</span> <span class="s">"Doe"</span><span class="p">),</span> <span class="n">Person</span><span class="p">(</span><span class="s">"Janet"</span><span class="p">,</span> <span class="s">"Dont"</span><span class="p">))</span>

<span class="kd">val</span> <span class="py">fullNames</span> <span class="p">=</span> <span class="n">people</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">person</span> <span class="p">-&gt;</span>
    <span class="s">"${person.firstName} ${person.lastName}"</span>
<span class="p">}</span>

<span class="c1">//fullNames will print: [John Doe, Janet Dont]</span></code></pre></figure> <p>All <code class="highlighter-rouge">Person</code> items in the list will be transformed to a <code class="highlighter-rouge">String</code> which consists of the firstname concatenated with the lastname of the person.</p> <p>If your collection contains nullable items which can be omitted, you should use <code class="highlighter-rouge">mapNotNull</code> instead, so you avoid checks for optionals. Note that pretty much all operations also offer a <code class="highlighter-rouge">indexed</code> version which will give you the corresponding index to each item.</p> <h3 id="flatten">Flatten</h3> <p><code class="highlighter-rouge">Flatten</code> can only be applied to nested collections. It will ‚Äúflatten‚Äù out the collection (removing the nesting). An example will clear things up easily:</p> <figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="kd">data class</span> <span class="nc">Person</span><span class="p">(</span><span class="kd">val</span> <span class="py">firstName</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">lastName</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">peopleStartingWithR</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s">"Rick"</span><span class="p">,</span> <span class="s">"Sanchez"</span><span class="p">),</span> <span class="n">Person</span><span class="p">(</span><span class="s">"Rudolph"</span><span class="p">,</span> <span class="s">"Reindeer"</span><span class="p">))</span>
<span class="kd">val</span> <span class="py">peopleStartingWithJ</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s">"John"</span><span class="p">,</span> <span class="s">"Doe"</span><span class="p">),</span> <span class="n">Person</span><span class="p">(</span><span class="s">"Janet"</span><span class="p">,</span> <span class="s">"Dont"</span><span class="p">))</span>
<span class="kd">val</span> <span class="py">allPeople</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">peopleStartingWithJ</span><span class="p">,</span> <span class="n">peopleStartingWithR</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">flattedList</span> <span class="p">=</span> <span class="n">allPeople</span><span class="p">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="c1">//flattedList will print: [Person(firstName=John, lastName=Doe), Person(firstName=Janet, lastName=Dont), Person(firstName=Rick, lastName=Sanchez), Person(firstName=Rudolph, lastName=Reindeer)]</span></code></pre></figure> <p>Basically the <code class="highlighter-rouge">List&lt;List&lt;Person&gt;&gt;</code> is transformed to <code class="highlighter-rouge">List&lt;Person&gt;</code>.</p> <h3 id="flatmap">FlatMap</h3> <p>Now lets talk about <code class="highlighter-rouge">flatMap</code>. It is very easy to understand if you deconstruct it. The name consists of <code class="highlighter-rouge">flat(ten)</code> and <code class="highlighter-rouge">map</code>, which have already been covered. This may let you assume that <code class="highlighter-rouge">flatten</code> happens first, but that is not the case. First will be mapped then flattened. Important: <code class="highlighter-rouge">flatMap</code> is implemented more efficently than just calling <code class="highlighter-rouge">map().flatten()</code>.</p> <figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="kd">data class</span> <span class="nc">Person</span><span class="p">(</span><span class="kd">val</span> <span class="py">firstName</span><span class="p">:</span> <span class="n">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">lastName</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">peopleStartingWithR</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s">"Rick"</span><span class="p">,</span> <span class="s">"Sanchez"</span><span class="p">),</span> <span class="n">Person</span><span class="p">(</span><span class="s">"Rudolph"</span><span class="p">,</span> <span class="s">"Reindeer"</span><span class="p">))</span>
<span class="kd">val</span> <span class="py">peopleStartingWithJ</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">Person</span><span class="p">(</span><span class="s">"John"</span><span class="p">,</span> <span class="s">"Doe"</span><span class="p">),</span> <span class="n">Person</span><span class="p">(</span><span class="s">"Janet"</span><span class="p">,</span> <span class="s">"Dont"</span><span class="p">))</span>
<span class="kd">val</span> <span class="py">allPeople</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="n">peopleStartingWithJ</span><span class="p">,</span> <span class="n">peopleStartingWithR</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">fullNames</span> <span class="p">=</span> <span class="n">allPeople</span><span class="p">.</span><span class="n">flatMap</span> <span class="p">{</span> <span class="n">people</span> <span class="p">-&gt;</span>
    <span class="n">people</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">person</span> <span class="p">-&gt;</span> <span class="s">"${person.firstName} ${person.lastName}"</span> <span class="p">}</span>
<span class="p">}</span>
<span class="c1">//fullNames will print: [John Doe, Janet Dont, Rick Sanchez, Rudolph Reindeer]</span></code></pre></figure> <p>The same can be rewritten like:</p> <figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="kd">val</span> <span class="py">fullNames</span> <span class="p">=</span> <span class="n">allPeople</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">people</span> <span class="p">-&gt;</span>
    <span class="n">people</span><span class="p">.</span><span class="n">map</span> <span class="p">{</span> <span class="n">person</span> <span class="p">-&gt;</span> <span class="s">"${person.firstName} ${person.lastName}"</span> <span class="p">}</span>
<span class="p">}.</span><span class="n">flatten</span><span class="p">()</span></code></pre></figure> <p>As mentioned previously, this would be less efficent than using <code class="highlighter-rouge">flatMap</code>. If you can‚Äôt wrap your head around it:</p> <ul> <li>A List&lt;List<Person>&gt; called allPeople is created</Person></li> <li>Map is called (item is a List<Person>)</Person></li> <li>On this item (List<Person>) map is called again (now we can access each person)</Person></li> <li>Now first and lastname are concatenated</li> <li>After mapping all this, the List&lt;List<String>&gt; is flattened to a List<String></String></String></li> </ul> <h3 id="zip">Zip</h3> <p>Zip simply creates Pairs from the elements at the same positon of two collections. This is done until the end of a collection is reached (so if collection A has 5 elements and collection B only 3, zip will generate 3 Pairs). In practice this would look like this (note that zip can be used with the infix notation):</p> <figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="kd">val</span> <span class="py">firstNames</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="s">"Rick"</span><span class="p">,</span> <span class="s">"Rudolph"</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">lastNames</span> <span class="p">=</span> <span class="n">listOf</span><span class="p">(</span><span class="s">"Sanchez"</span><span class="p">,</span> <span class="s">"Reindeer"</span><span class="p">,</span> <span class="s">"Ignored"</span><span class="p">)</span>

<span class="kd">val</span> <span class="py">fullNames</span> <span class="p">=</span> <span class="n">firstNames</span> <span class="n">zip</span> <span class="n">lastNames</span>
<span class="kd">val</span> <span class="p">(</span><span class="py">unzippedfirstNames</span><span class="p">,</span> <span class="py">unzippedLastNames</span><span class="p">)</span> <span class="p">=</span> <span class="n">fullNames</span><span class="p">.</span><span class="n">unzip</span><span class="p">()</span>

<span class="c1">//fullNames: [(Rick, Sanchez), (Rudolph, Reindeer)]</span>
<span class="c1">//unzippedFirstNames: [Rick, Rudolph]</span>
<span class="c1">//unzippedLastNames: [Sanchez, Reindeer]</span></code></pre></figure> <p>Unzip does the inverse of zip (collection of pairs will be split up into two collections).</p> <h2 id="filtering">Filtering</h2> <h3 id="filter">Filter</h3> <p><code class="highlighter-rouge">filter</code> comes into many different flavours. The most basic one is filter by a certain predicate. Here is an example for it:</p> <figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="kd">val</span> <span class="py">numbers</span> <span class="p">=</span> <span class="p">(</span><span class="m">0</span><span class="o">..</span><span class="m">10</span><span class="p">).</span><span class="n">toList</span><span class="p">()</span>

<span class="kd">val</span> <span class="py">filteredNumbers</span> <span class="p">=</span> <span class="n">numbers</span><span class="p">.</span><span class="n">filter</span> <span class="p">{</span> <span class="n">number</span> <span class="p">-&gt;</span> <span class="n">number</span> <span class="p">&gt;</span> <span class="m">5</span> <span class="p">}</span>

<span class="c1">//filteredNumbers: [6, 7, 8, 9, 10]</span></code></pre></figure> <p>There is also <code class="highlighter-rouge">filterNotNull</code> which returns all elements which are not null, <code class="highlighter-rouge">filterNot</code> which returns all elements that are not matching your predicate and <code class="highlighter-rouge">filterIsInstance</code> which will let you filter by the given type.</p> <h3 id="partition">Partition</h3> <p>Partition will give you the matching and nonmatching items each in a seperate list. Example:</p> <figure class="highlight"><pre><code class="language-kotlin" data-lang="kotlin"><span class="kd">val</span> <span class="py">numbers</span> <span class="p">=</span> <span class="p">(</span><span class="m">0</span><span class="o">..</span><span class="m">10</span><span class="p">).</span><span class="n">toList</span><span class="p">()</span>

<span class="kd">val</span> <span class="p">(</span><span class="py">matching</span><span class="p">,</span> <span class="py">notMatching</span><span class="p">)</span> <span class="p">=</span> <span class="n">numbers</span><span class="p">.</span><span class="n">partition</span> <span class="p">{</span> <span class="n">number</span> <span class="p">-&gt;</span> <span class="n">number</span> <span class="p">&gt;</span> <span class="m">5</span> <span class="p">}</span>

<span class="c1">//matching: [6, 7, 8, 9, 10]</span>
<span class="c1">//notMatching: [0, 1, 2, 3, 4, 5]</span></code></pre></figure> <h3 id="all-any-none">All, any, none</h3> <p>All will be true if all elements match the predicate OR the collection is empty. Any will return true if at least one element matches the predicate. Hence, none will return true if no element matches the predicate.</p> <p>Furthermore any and none can be used without a predicate. In this case any will return true if the collection has elements. On the other hand, none will return true if the collection has no elements.</p> </div> <!-- JS --> <script src="http://localhost:4000/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://taylantatli.me/Halve/images/halve-home-image.png) center center no-repeat;"> <a href="http://taylantatli.me/Halve" class="inactive" target="_blank" rel="nofollow external"> <span> Halve Jekyll Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://cloud.githubusercontent.com/assets/754514/14509720/61c61058-01d6-11e6-93ab-0918515ecd56.png) center center no-repeat;"> <a href="http://taylantatli.me/Moon" target="_blank" rel="nofollow external"> <span> Moon Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Ramme/master/assets/img/screenshot-post.png) center center no-repeat;"> <a href="http://taylantatli.me/Ramme" target="_blank" rel="nofollow external"> <span> Ramme Jekyll Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Daisy-Pelican-Theme/master/Preview-1.png) center center no-repeat;"> <a href="http://taylantatli.me/Daisy-Pelican-Theme/" target="_blank" rel="nofollow external"> <span> Daisy Pelican Theme </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/Block-Icon-Theme/master/Preview.png) center center no-repeat;"> <a href="https://github.com/TaylanTatli/Block-Icon-Theme" class="inactive" target="_blank" rel="nofollow external"> <span> Block Icon Theme <br><em>in progress</em> </span> </a> </li> <li style="background:url(https://raw.githubusercontent.com/TaylanTatli/StartPage/master/preview.png) center center no-repeat;"> <a href="http://taylantatli.me/StartPage/" class="inactive" target="_blank" rel="nofollow external"> <span> Start Page <br><em>in progress</em> </span> </a> </li> </ul> </div> </div> </body> </html>
